# Layered Architecture
## 토폴로지



![토폴로지](https://blog.kakaocdn.net/dn/c3w73r/btsDfXeybkV/bQ1OKPHtlm6gpT5okapakK/img.jpg)


- 단일 계층 구조 (왼쪽)
: 모든 계층이 하나의 시스템에 통합되어 있음. (Monolithic 구조에 가까움)
- 프레젠테이션 분리형 (중간)
: Presentation Layer는 별도의 시스템에 분리되어 있고, 나머지 레이어는 함께 존재함. 웹 클라이언트가 프론트엔드 서버로 분리된 구조.
- 완전 분산 구조 (오른쪽)
: 모든 레이어가 하나의 시스템에 통합되어 있지만, 여러 인스턴스로 분산 가능. (수평 확장이 쉬운 구조)

## 스타일 특성
- 다음 계층으로 이동할때 건너뛸 수 없음
- closed로 되어있기 때문에 독립적이로 다른 계층에 영향을 미치지 않음
- 서로 잘 모름

### 계층 추가
- 공통으로 쓰는 레이어를 서비스로 묶음
- 서비스 레이어를 열어놔서 거치는 것만 거치고 아니면 통과 가능

## 장단점
- 장점
1. 단순성 : 레이어드 아키텍처는 대표적인 기술 분할이므로 직관적으로
 이해 가능하고 레이어를 구성할 수 있음
- 단점
1. 유지보수성 - 병렬처리 부족
2. 테스트가능성 -  테스트 코드 작성시에 항상 DB가 필요하며 Spring Test를 기반으로 한 무거운 테스트를 수행해야 함.  긴 시간이 소요
3. 배포가능성 - 위험도가 높고 빈도가 낮아짐, 영향범위가 많음


# Modular Monolith Architecture
## 토폴로지
![토폴로지](https://www.kimcoder.io/assets/images/software-architecture-101-31.jpg)


- api가 아니라 모듈러로 통신
- msa로 분리 가능
- 최종 혹은 중간단계 아키텍처

## 스타일 특성 
### 구성 방식
#### 모노리식 구조
- 깃허브 하나에 여러가지 모듈이 들어감
- 내부 코드에서는 서로 호출할 수 있기 때문에 주의 필요

#### 모듈러 구조
- JAR파일들이 모여 하나로 배포

### 모듈 간 통신
- ptpa - 인터페이스를 통해 잘 호출하느냐가 중요
- JAR파일로 나누어져 있으면 dll파일이 많아져 안티패턴이 생길 수 있음
- ma - 모듈간의 통신을 억제함

## 장단점
### 장점
1. 모듈성 : 도메인별로 모듈을 분리하여, 추후 특정 도메인에 대한 부하가 발생할 때 해당 모듈만 마이크로서비스로 분리하기 쉬움
2. 확장성
## 단점
1. 단순성 : 도메인을 나누는게 까다롭기 때문에 매우 단순하지 않음
2. 배포 효율 : 모듈별 통신에 대한 엄격한 장치가 없다면 복잡도가 증가하고, 모듈별로 빌드 설정이 다를 수 있음

# 적용예시
## Layered Architecture
- 레이어 별 역할과 책임 분리가 명확이 분할 가능할 때, 데이터 흐름이 위에서 아래로, 아래에서 위로 단방향일 때
- 웹 어플리케이션(클라이언트, 백엔드, 데이터베이스), OSI 7계층(응용, 표현, 세션, 전송, 네트워크, 데이터 링크, 물리 계층), TCP/IP 4계층(응용, 전송, 인터넷, 네트워크 액세스 계층)
## Modular Monolith Architecture
- 배민같은 배달 서비스
- 소규모 단위의 인원이 한정된 곳
