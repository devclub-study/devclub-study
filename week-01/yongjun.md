# 소프트웨어 아키텍처 101 - 8회차

---

## 레이어드 아키텍처 스타일
- 코딩을 막 시작하기에는 좋음
- 레이어드 아키텍처 (수평구조)
- 규칙의 수나, 유형의 대한 특별한 규칙 없음
- 도메인 분할 x / 기술적 분할 o
- DDD의 경우 해당 스타일과 적합하지 않음
- 레이어 추가, 삭제가 자유로움

### Presentation layer
- UI, 브라우저, 통신로직

### Business layer
- 요청 관련

### Persistence layer
- 데이터들을 저장하고 조회

### Database layer
- DB Server

---

![img](https://raw.githubusercontent.com/yongjun96/image/refs/heads/main/devclub-study/week-01/%EB%A0%88%EC%9D%B4%EC%96%B4.png)

- 웹 어플리케이션에서 해당 구조를 가장 많이 사용해서 배포 진행했음
- 모놀로식

---

### 스타일 특성 - 격리된 계층
- 각 계층은 열고 닫을 수 있음
- 진행 순서 중, 닫힌 곳(격리)이 있다면 진행 불가능
- 각 계층은 독립적이며, 각 계층은 서로 알 수 없도록 작업

---

### 레이어드 아키텍처가 사용될 수 있는 경우 ⭐️
- 웹 어플리케이션 (클라이언트 -> 백엔드 -> DB)
- OSI 7계층 (응용 -> 표현 -> 세션 -> 전송 -> 네트워크 -> 데이터 링크 -> 물리)
- TCP/IP 4계층 (응용 -> 전송 -> 인터넷 -> 네트워크 엑세스)

### 단점
- 모노리식이기 때문에 모듈성이 부족
  - 레이어드 아키텍처의 한 구조에서 메모리 부족이 발생하는 경우 , 전체 어플리케이션 단계가 크레쉬
- 도메인 별로 분리 x / 배포 시간이 상대적으로 길어 짐

---

## 모듈러 모놀리스 아키텍처 스타일
- 모듈 단위로 나뉘어진 아키텍처
- 도메인 분할 아키텍처 (도메인 영역별로 배포)
- 모둘이 여러 개지만 DB가 여러 개는 아님  
- 모듈 사이에 통신을 할 때 API가 아닌, 메소드 통신
- 처음에는 레이어드 아키텍처를 사용하다, 도메인이 점점 많아 지면 모듈러로 넘어가는 경우가 많음
  - DB를 별로도 분리하고 MSI 방식으로 변경될 가능성도 있음
- 서비스의 따라 최종 형태가 될 수도 중간 단계가 될 수도 있음

![img](https://raw.githubusercontent.com/yongjun96/image/refs/heads/main/devclub-study/week-01/%EB%AA%A8%EB%93%88%EB%9F%AC.png)

### 스타일 특성
- 모듈러 구조
  - 각 각의 모듈이 다른 레포에 있고, JAR 파일의 형태가 됨
  - 배포하는 경우 하나의 JAR 파일이 모여 하나의 단위로 조합

#### 장점
- 팀들이 별도의 모듈에서 작업할 수 있다는 장점

#### 단점
- 의존성을 명확하게 구분해서 사용하기 힘듦
- 과도한 통신이 생길 경우 구조가 맞지 않을 수 있음

---

- 모듈간 통신
  - 모듈이 여러 개인 경우 어떻게 할 것인지

- Peer-to-peer 방식
  - 모듈간의 필요한 class를 인스턴스화 해서 호출

- 중재자(Mediator) 방식
  - 어떤 모듈을 호출할 때 중재(Mediator) 해주는 것이 필요함
  - 중재자는 모듈끼리 의사소통이 되지 않도록 막아 줌

---

### 생각해 봐야 할 점
- common의 사용은 좋은가?
  - 코드의 재사용성을 높이는 것이 좋은가?
  - 공통 로직들도 도메인으로 최대한 분할을 해줘야 한다.
  - 재사용 성이 강해지면 common의 중요도가 올라감


- 모듈러의 도메인 분할이 쉬운가?
  - 아니다. 쉽지 않을 뿐더러 단순하지 않은 듯
  - 의존성을 줄이는 작업이 굉장히 어려울 수 있어, 단점으로 작용할 수 있음


- 도메인의 대해서 충분한 배경 지식이 있다면 모듈러 모놀리스를 사용할 수 있음
  - 도메인 중심의 팀이 꾸려져 있어도 좋은 선택
  - 확장성이 필요한 경우는 부적합
    - 사용자가 대폭 증가하는 경우
    - 기술적 관점의 변경이 잦은 경우
    - 도메인 팀별로 커뮤니케이션이 많이 필요할 수 있음
    - 너무 세분화된 도메인 분할은 역효과가 날 수 있음
    - 재사용이 많은 경우 모듈을 나누는게 불가능 할 수도 있음
